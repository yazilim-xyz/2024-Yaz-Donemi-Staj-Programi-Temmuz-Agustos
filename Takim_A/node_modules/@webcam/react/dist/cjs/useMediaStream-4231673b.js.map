{"version":3,"file":"useMediaStream-4231673b.js","sources":["../../../core/dist/esm/helpers/constraints/applyMediaStreamConstraints.js","../../../core/dist/esm/helpers/constraints/getConstraintsBySource.js","../../../core/dist/esm/helpers/getMediaTrackSources.js","../../../core/dist/esm/helpers/getMainCamera.js","../../../core/dist/esm/helpers/constraints/getVideoTrackConstraints.js","../../../core/dist/esm/helpers/constraints/getMediaStreamConstraints.js","../../../core/dist/esm/helpers/stream/hasGetUserMedia.js","../../../core/dist/esm/helpers/stream/getUserMedia.js","../../../core/dist/esm/helpers/stream/canGetUserMedia.js","../../../core/dist/esm/helpers/stream/getMediaStream.js","../../../core/dist/esm/helpers/stream/stopMediaStream.js","../../src/utils/hooks/useMediaStream.ts"],"sourcesContent":["/* @license @webcam/core v0.0.0 */\nimport{_ as r,a as e,f as t,d as a}from\"../../_rollupPluginBabelHelpers-59ed2110.js\";var n=function(){var n=r(e().mark((function r(n,s){var o,i,u,c,p,f,l,d;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=s.video,i=s.audio,u=n.getVideoTracks(),c=t(u,1),!(p=c[0])){r.next=5;break}return r.next=5,p.applyConstraints(\"object\"===a(o)?o:{});case 5:if(f=n.getAudioTracks(),l=t(f,1),!(d=l[0])){r.next=9;break}return r.next=9,d.applyConstraints(\"object\"===a(i)?i:{});case 9:case\"end\":return r.stop()}}),r)})));return function(r,e){return n.apply(this,arguments)}}();export{n as applyMediaStreamConstraints};\n//# sourceMappingURL=applyMediaStreamConstraints.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{_ as r,a as e,d as i}from\"../../_rollupPluginBabelHelpers-59ed2110.js\";import{getMediaTrackSources as n}from\"../getMediaTrackSources.js\";var a=function(r){if(r)return{optional:[{sourceId:r}]}},t=function(r){if(\"object\"===i(r)){var e=r.deviceId;return\"string\"==typeof e?e:Array.isArray(e)?e[0]:\"object\"===i(e)&&e.ideal?Array.isArray(e.ideal)?e.ideal[0]:e.ideal:void 0}},o=function(){var i=r(e().mark((function r(i){var o,u,d,c,s,f;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={video:void 0,audio:void 0},r.next=3,n();case 3:if(u=r.sent){r.next=6;break}return r.abrupt(\"return\",o);case 6:return u.forEach((function(r){\"video\"!==r.kind?\"audio\"===r.kind&&(c=r.id):d=r.id})),s=t(i.video),f=t(i.audio),o.audio=a(null!=s?s:d),o.video=a(null!=f?f:c),r.abrupt(\"return\",o);case 12:case\"end\":return r.stop()}}),r)})));return function(r){return i.apply(this,arguments)}}();export{o as getConstraintsBySource};\n//# sourceMappingURL=getConstraintsBySource.js.map\n","/* @license @webcam/core v0.0.0 */\nvar e=function(){return new Promise((function(e){\"getSources\"in MediaStreamTrack?MediaStreamTrack.getSources(e):e(void 0)}))};export{e as getMediaTrackSources};\n//# sourceMappingURL=getMediaTrackSources.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{_ as e,a as r,d as n}from\"../_rollupPluginBabelHelpers-59ed2110.js\";var t={back:/(?=.*\\bback\\b)(?=.*\\b0\\b)/,front:/\\bfront\\b/},a=function(){var a=e(r().mark((function e(a,i){var u,c,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"mediaDevices\"in navigator&&navigator.mediaDevices.enumerateDevices){e.next=2;break}return e.abrupt(\"return\");case 2:return e.next=4,navigator.mediaDevices.enumerateDevices();case 4:if(u=e.sent,!((c=u.filter((function(e){return\"videoinput\"===e.kind}))).length<=2)){e.next=8;break}return e.abrupt(\"return\");case 8:return s=i?\"front\":\"back\",\"object\"===n(a)&&(o=a instanceof RegExp?a:a[s]),e.abrupt(\"return\",c.find((function(e){var r,n=e.label;return(null!==(r=o)&&void 0!==r?r:t[s]).test(n)})));case 11:case\"end\":return e.stop()}}),e)})));return function(e,r){return a.apply(this,arguments)}}();export{t as DEFAULT_MAIN_CAMERA_REG_EXP,a as getMainCamera};\n//# sourceMappingURL=getMainCamera.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{_ as e,a as t,c as r,e as a,d as i}from\"../../_rollupPluginBabelHelpers-59ed2110.js\";import{getMainCamera as n}from\"../getMainCamera.js\";var o={UHD:{width:3840,height:2160},QHD:{width:2560,height:1440},FHD:{width:1920,height:1080},HD:{width:1280,height:720}},d=function(){var d=e(t().mark((function e(d,c){var h,s,u,p,l,m,f,v;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=c.mainCamera,s=c.frontCamera,u=c.cameraResolutionType,p=c.cameraResolutionMode,l=void 0===p?\"ideal\":p,m=r({},u&&{width:a({},l,o[u].width),height:a({},l,o[u].height)}),!h){e.next=7;break}return e.next=5,n(\"object\"===i(h)?h:void 0,s);case 5:null!=(f=e.sent)&&f.deviceId&&(m.deviceId={exact:f.deviceId});case 7:return m.deviceId||\"boolean\"!=typeof s||(m.facingMode=s?\"user\":\"environment\"),v=r(r({},m),d),e.abrupt(\"return\",v);case 10:case\"end\":return e.stop()}}),e)})));return function(e,t){return d.apply(this,arguments)}}();export{o as VIDEO_RESOLUTION_SIZE,d as getVideoTrackConstraints};\n//# sourceMappingURL=getVideoTrackConstraints.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{_ as e,a as r,c as t,b as o,d as i}from\"../../_rollupPluginBabelHelpers-59ed2110.js\";import{getConstraintsBySource as a}from\"./getConstraintsBySource.js\";import{getVideoTrackConstraints as n}from\"./getVideoTrackConstraints.js\";import\"../getMediaTrackSources.js\";import\"../getMainCamera.js\";var s=[\"video\",\"audio\"],d=[\"muted\"],u=function(){var u=e(r().mark((function e(){var u,c,v,p,m,f,b,g,l,x,j,k,h,C,w,y,B,M=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(u=M.length>0&&void 0!==M[0]?M[0]:{}).constraints,p=(v=void 0===c?{}:c).video,m=void 0===p||p,f=v.audio,b=void 0!==f&&f,g=o(v,s),l=u.options,j=(x=void 0===l?{}:l).muted,k=void 0!==j&&j,h=o(x,d),!(\"mediaDevices\"in navigator)){e.next=9;break}if(w=b,!m){e.next=7;break}return e.next=6,n(\"object\"===i(m)?m:{},h);case 6:C=e.sent;case 7:e.next=14;break;case 9:return e.next=11,a({video:m,audio:b});case 11:y=e.sent,w=y.audio,C=y.video;case 14:return B=t(t(t({},g),!k&&{audio:void 0===w||w}),{},{video:void 0===C||C}),e.abrupt(\"return\",B);case 16:case\"end\":return e.stop()}}),e)})));return function(){return u.apply(this,arguments)}}();export{u as getMediaStreamConstraints};\n//# sourceMappingURL=getMediaStreamConstraints.js.map\n","/* @license @webcam/core v0.0.0 */\nvar e=function(){return!(!(\"mediaDevices\"in navigator)||!navigator.mediaDevices.getUserMedia)};export{e as hasGetUserMedia};\n//# sourceMappingURL=hasGetUserMedia.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{hasGetUserMedia as e}from\"./hasGetUserMedia.js\";var i=\"undefined\"!=typeof window&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia),r=function(r){return e()?navigator.mediaDevices.getUserMedia(r):i?new Promise((function(e,t){i.call(navigator,r,e,t)})):Promise.reject(new Error(\"Method getUserMedia of Navigator is not implemented in this browser\"))};export{r as getUserMedia,i as getUserMediaFunction};\n//# sourceMappingURL=getUserMedia.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{getUserMediaFunction as e}from\"./getUserMedia.js\";import{hasGetUserMedia as r}from\"./hasGetUserMedia.js\";var i=function(){return\"undefined\"!=typeof navigator&&(r()?!!navigator.mediaDevices.getUserMedia:!!e)};export{i as canGetUserMedia};\n//# sourceMappingURL=canGetUserMedia.js.map\n","/* @license @webcam/core v0.0.0 */\nimport{_ as e,a as r}from\"../../_rollupPluginBabelHelpers-59ed2110.js\";import{getMediaStreamConstraints as t}from\"../constraints/getMediaStreamConstraints.js\";import{canGetUserMedia as n}from\"./canGetUserMedia.js\";import{getUserMedia as a}from\"./getUserMedia.js\";import\"../constraints/getConstraintsBySource.js\";import\"../getMediaTrackSources.js\";import\"../constraints/getVideoTrackConstraints.js\";import\"../getMainCamera.js\";import\"./hasGetUserMedia.js\";var s=function(){var s=e(r().mark((function e(s,o){var i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n()){e.next=2;break}throw new Error(\"Method getUserMedia of Navigator is not supported\");case 2:return e.next=4,t(s);case 4:if(c=e.sent,!o){e.next=11;break}return e.next=8,new Promise((function(e,r){var t=setTimeout((function(){r(new Error(\"User media request has reached the specified time limit\"))}),o);a(c).then((function(r){return clearTimeout(t),e(r)})).catch((function(e){clearTimeout(t),r(e)}))}));case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,a(c);case 13:i=e.sent;case 14:if(i){e.next=16;break}throw new Error(\"Stream of media content was not found\");case 16:return e.abrupt(\"return\",i);case 17:case\"end\":return e.stop()}}),e)})));return function(e,r){return s.apply(this,arguments)}}();export{s as getMediaStream};\n//# sourceMappingURL=getMediaStream.js.map\n","/* @license @webcam/core v0.0.0 */\nvar o=function(o){if(o){if(!(o instanceof MediaStreamTrack))return o.getVideoTracks&&o.getAudioTracks?(o.getVideoTracks().forEach((function(r){o.removeTrack(r),r.stop()})),void o.getAudioTracks().forEach((function(r){o.removeTrack(r),r.stop()}))):void(o.getTracks&&o.getTracks().forEach((function(r){o.removeTrack(r),r.stop()})));o.stop()}};export{o as stopMediaStream};\n//# sourceMappingURL=stopMediaStream.js.map\n","import { useEffect, useRef } from 'react';\r\nimport type { GetMediaStreamConstraintsParams, MediaTrackConstraintsOptions } from '@webcam/core';\r\nimport {\r\n  applyMediaStreamConstraints,\r\n  getMediaStream,\r\n  getMediaStreamConstraints,\r\n  stopMediaStream\r\n} from '@webcam/core';\r\n\r\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\r\n\r\nexport interface UseMediaStreamParams extends MediaTrackConstraintsOptions {\r\n  disable?: boolean;\r\n  requestTimeLimit?: number;\r\n  applyConstraints?: boolean;\r\n  audioConstraints?: MediaTrackConstraints;\r\n  videoConstraints?: MediaTrackConstraints;\r\n  onStreamRequest?: () => void;\r\n  onStreamError?: (error: Error) => void;\r\n  onStreamStart?: (stream: MediaStream) => void;\r\n  onStreamStop?: (stream?: MediaStream) => void;\r\n}\r\n\r\n/**\r\n * Returns and manages the media stream in accordance with the passed parameters for configuration\r\n *\r\n * @param {UseMediaStreamParams} params - parameters for receiving media stream\r\n * @return {MediaStream | undefined} media stream instance\r\n */\r\nexport const useMediaStream = ({\r\n  onStreamRequest,\r\n  onStreamError,\r\n  onStreamStart,\r\n  onStreamStop,\r\n  disable,\r\n  applyConstraints,\r\n  requestTimeLimit,\r\n  videoConstraints,\r\n  audioConstraints,\r\n  cameraResolutionMode,\r\n  cameraResolutionType,\r\n  frontCamera,\r\n  mainCamera,\r\n  muted\r\n}: UseMediaStreamParams = {}) => {\r\n  const streamRef = useRef<MediaStream>();\r\n  const handlerRef = useRef({\r\n    request: onStreamRequest,\r\n    error: onStreamError,\r\n    start: onStreamStart,\r\n    stop: onStreamStop\r\n  });\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    handlerRef.current = {\r\n      request: onStreamRequest,\r\n      error: onStreamError,\r\n      start: onStreamStart,\r\n      stop: onStreamStop\r\n    };\r\n  }, [onStreamRequest, onStreamError, onStreamStart, onStreamStop]);\r\n\r\n  useEffect(() => {\r\n    if (disable) return;\r\n\r\n    const streamConstraintsParams: GetMediaStreamConstraintsParams = {\r\n      constraints: {\r\n        video: videoConstraints,\r\n        audio: audioConstraints\r\n      },\r\n      options: {\r\n        cameraResolutionMode,\r\n        cameraResolutionType,\r\n        frontCamera,\r\n        mainCamera,\r\n        muted\r\n      }\r\n    };\r\n\r\n    const requestMediaStream = async (params: GetMediaStreamConstraintsParams) => {\r\n      try {\r\n        handlerRef.current.request?.();\r\n\r\n        const mediaStream = await getMediaStream(params, requestTimeLimit);\r\n\r\n        handlerRef.current.start?.(mediaStream);\r\n      } catch (error) {\r\n        handlerRef.current.error?.(error as Error);\r\n      }\r\n    };\r\n\r\n    const runningStream = streamRef.current;\r\n    if (applyConstraints && runningStream) {\r\n      getMediaStreamConstraints(streamConstraintsParams)\r\n        .then((constraints) => applyMediaStreamConstraints(runningStream, constraints))\r\n        .catch(() => requestMediaStream(streamConstraintsParams));\r\n    } else {\r\n      requestMediaStream(streamConstraintsParams);\r\n    }\r\n\r\n    return () => {\r\n      handlerRef.current.stop?.(runningStream);\r\n      stopMediaStream(runningStream);\r\n    };\r\n  }, [\r\n    // STREAM PARAMS:\r\n    disable,\r\n    applyConstraints,\r\n    requestTimeLimit,\r\n    // DEFAULT CONSTRAINTS:\r\n    videoConstraints,\r\n    audioConstraints,\r\n    // CUSTOM CONSTRAINTS:\r\n    cameraResolutionMode,\r\n    cameraResolutionType,\r\n    frontCamera,\r\n    mainCamera,\r\n    muted\r\n  ]);\r\n\r\n  return streamRef.current;\r\n};\r\n"],"names":["n","r","e","mark","s","o","i","u","c","p","f","l","d","wrap","prev","next","video","audio","getVideoTracks","t","applyConstraints","a","getAudioTracks","stop","apply","this","arguments","optional","sourceId","deviceId","Array","isArray","ideal","Promise","MediaStreamTrack","getSources","sent","abrupt","forEach","kind","id","back","front","navigator","mediaDevices","enumerateDevices","filter","length","RegExp","find","label","test","UHD","width","height","QHD","FHD","HD","h","m","v","mainCamera","frontCamera","cameraResolutionType","cameraResolutionMode","exact","facingMode","b","g","x","j","k","C","w","y","B","M","constraints","options","muted","getUserMedia","window","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","call","reject","Error","setTimeout","then","clearTimeout","removeTrack","getTracks","_ref","undefined","onStreamRequest","onStreamError","onStreamStart","onStreamStop","disable","requestTimeLimit","videoConstraints","audioConstraints","streamRef","useRef","handlerRef","request","error","start","useIsomorphicLayoutEffect","current","useEffect","streamConstraintsParams","requestMediaStream","_ref2","_regeneratorRuntime","_callee","params","_handlerRef$current$r","_handlerRef$current","_handlerRef$current$s","_handlerRef$current2","mediaStream","_handlerRef$current$e","_handlerRef$current3","_context","getMediaStream","t0","_x","runningStream","getMediaStreamConstraints","applyMediaStreamConstraints","_handlerRef$current$s2","_handlerRef$current4","stopMediaStream"],"mappings":"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"}