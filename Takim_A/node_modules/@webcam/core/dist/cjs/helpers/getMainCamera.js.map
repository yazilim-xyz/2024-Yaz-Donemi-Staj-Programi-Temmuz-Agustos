{"version":3,"file":"getMainCamera.js","sources":["../../../src/helpers/getMainCamera.ts"],"sourcesContent":["export type GetMainCameraParams = RegExp | { front?: RegExp; back?: RegExp };\r\n\r\nexport const DEFAULT_MAIN_CAMERA_REG_EXP = {\r\n  back: /(?=.*\\bback\\b)(?=.*\\b0\\b)/,\r\n  front: /\\bfront\\b/\r\n};\r\n\r\n/**\r\n * Returns MediaDeviceInfo in accordance with the default or passed parameters\r\n *\r\n * @param {GetMainCameraParams} params - pattern for searching the main camera device info by its label\r\n * @param {boolean} isFrontCamera - should the front camera be searched (back by default)\r\n * @return {MediaDeviceInfo | undefined} main camera device info\r\n */\r\nexport const getMainCamera = async (params?: GetMainCameraParams, isFrontCamera?: boolean) => {\r\n  if (!('mediaDevices' in navigator && navigator.mediaDevices.enumerateDevices)) return;\r\n\r\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\r\n  const cameras = mediaDevices.filter(({ kind }) => kind === 'videoinput');\r\n\r\n  if (cameras.length <= 2) return;\r\n\r\n  let regExp: RegExp | undefined;\r\n  const cameraKey = isFrontCamera ? 'front' : 'back';\r\n\r\n  if (typeof params === 'object') {\r\n    regExp = params instanceof RegExp ? params : params[cameraKey];\r\n  }\r\n\r\n  return cameras.find(({ label }) =>\r\n    (regExp ?? DEFAULT_MAIN_CAMERA_REG_EXP[cameraKey]).test(label)\r\n  );\r\n};\r\n"],"names":["DEFAULT_MAIN_CAMERA_REG_EXP","back","front","getMainCamera","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","isFrontCamera","mediaDevices","cameras","regExp","cameraKey","wrap","_context","prev","next","navigator","enumerateDevices","abrupt","sent","filter","_ref2","kind","length","_typeof","RegExp","find","_ref3","_regExp","label","test","stop","_x","_x2","apply","this","arguments"],"mappings":";uEAEaA,EAA8B,CACzCC,KAAM,4BACNC,MAAO,aAUIC,EAAa,WAAA,IAAAC,EAAAC,EAAAA,kBAAAC,wBAAAC,MAAG,SAAAC,EAAOC,EAA8BC,GAAuB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAR,EAAAA,sBAAAS,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GACjF,iBAAkBC,WAAaA,UAAUR,aAAaS,iBAAgB,CAAAJ,EAAAE,KAAA,EAAA,KAAA,CAAA,OAAAF,EAAAK,OAAA,UAAA,KAAA,EAAA,OAAAL,EAAAE,KAAA,EAEjDC,UAAUR,aAAaS,mBAAkB,KAAA,EACI,GADlET,EAAYK,EAAAM,QACZV,EAAUD,EAAaY,QAAO,SAAAC,GAAO,MAAgB,eAAhBA,EAAJC,SAE3BC,QAAU,GAAC,CAAAV,EAAAE,KAAA,EAAA,KAAA,CAAA,OAAAF,EAAAK,OAAA,UAAA,KAAA,EAOtB,OAJKP,EAAYJ,EAAgB,QAAU,OAEtB,WAAlBiB,EAAAA,QAAOlB,KACTI,EAASJ,aAAkBmB,OAASnB,EAASA,EAAOK,IACrDE,EAAAK,OAAA,SAEMT,EAAQiB,MAAK,SAAAC,GAAA,IAAAC,EAAGC,EAAKF,EAALE,MAAK,OACnB,QAAPD,EAAClB,SAAMkB,IAAAA,EAAAA,EAAI/B,EAA4Bc,IAAYmB,KAAKD,EAC1D,KAAC,KAAA,GAAA,IAAA,MAAA,OAAAhB,EAAAkB,OAAA,GAAA1B,EACF,KAAA,OAAA,SAlByB2B,EAAAC,GAAA,OAAAhC,EAAAiC,MAAAC,KAAAC,UAAA,CAAA,CAAA"}